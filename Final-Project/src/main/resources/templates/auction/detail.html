<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>경매 상세 페이지</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgb(0,0,0); /* Fallback color */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
        }
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto; /* 15% from the top and centered */
            padding: 20px;
            border: 1px solid #888;
            width: 80%; /* Could be more or less, depending on screen size */
        }
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        .close:hover,
        .close:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@stomp/stompjs@7.0.0/bundles/stomp.umd.min.js"></script>
<script src="/price.js"></script>
<body>
<div id="clock" th:text="${time}"></div>
<h1 th:if="${s.status !='경매 마감'}">뛰어들어라</h1>
<h1 th:if="${s.status =='경매 마감'}">마감된 경매 입니다 아무것도 누르지 마시고 뒤로 가시오</h1>
<h1>경매 상세한 페이지</h1>
<input type="hidden" th:value="${s.num}" id="num">
<input type="hidden" th:value="${session.loginId}" id="buyer">
title : <span th:text="${s.title}"></span> <br>
seller id : <span th:text="${s.seller.id}"></span> <br>
min : <span th:text="${s.min}"></span> <br>
max : <span th:text="${s.max}" id="max"></span> <input type="number" th:min="${s.max}" th:value="${s.max}" id="price"> <input type="button" value="입찰" id="btn"> <br>
start_time : <span th:text="${s.start_time}"></span> <br>
end_time : <span th:text="${s.end_time}"></span> <br>
content: <span th:text="${s.content}"></span> <br>
product: <span th:text="${s.product.name}"></span> <br>
status <span th:text="${s.status}"></span> <br>
img1: <img th:if="${s.product.img1 != null}" th:src="@{/auth/prod/read-img(img=${s.product.img1})}" style="width: 100px; height: 100px"> <br>
img2: <img th:if="${s.product.img2 != null}" th:src="@{/auth/prod/read-img(img=${s.product.img2})}" style="width: 100px; height: 100px"><br>
img3: <img th:if="${s.product.img3 != null}" th:src="@{/auth/prod/read-img(img=${s.product.img3})}" style="width: 100px; height: 100px"><br>
img4: <img th:if="${s.product.img4 != null}" th:src="@{/auth/prod/read-img(img=${s.product.img4})}" style="width: 100px; height: 100px"> <br>
img5: <img th:if="${s.product.img5 != null}" th:src="@{/auth/prod/read-img(img=${s.product.img5})}" style="width: 100px; height: 100px"> <br>

<a href="/index_member">home으로</a>
<button id="reportBtn">신고하기</button>

<div id="reportModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>신고하기</h2>
        <form id="reportForm" action="/auth/report/add" method="post">
            <label for="reportOptions">신고 내용:</label>
            <select id="reportOptions" name="type">
                <option value="1">스팸홍보/도배글입니다</option>
                <option value="2">음란물입니다</option>
                <option value="3">불법정보를 포함하고 있습니다</option>
                <option value="4">청소년에게 유해한 내용입니다</option>
                <option value="5">욕설/혐오 표현입니다</option>
                <option value="6">개인정보 노출 게시물 입니다</option>
                <option value="7">불쾌한 표현이 있습니다</option>
            </select><br>

            <label for="reportReason">신고 내용:</label>
            <textarea id="reportReason" name="content" rows="4" cols="50"></textarea><br>

            <input type="hidden" th:value="${s.num}" name="auction">
            <input type="hidden" th:value="${session.loginId}" name="member">
            <input type="submit" value="제출">
            <input type="button" value="취소" id="cancelBtn">
        </form>
    </div>
</div>

<script>
    // Get the modal
    var modal = document.getElementById("reportModal");

    // Get the button that opens the modal
    var btn = document.getElementById("reportBtn");

    // Get the <span> element that closes the modal
    var span = document.getElementsByClassName("close")[0];

    // Get the cancel button that closes the modal
    var cancelBtn = document.getElementById("cancelBtn");

    // When the user clicks the button, open the modal
    btn.onclick = function() {
        modal.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
        modal.style.display = "none";
    }

    // When the user clicks the cancel button, close the modal
    cancelBtn.onclick = function() {
        modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal) {
            modal.style.display = "none";
        }
    }
    $('#reportForm').submit(function(event) {
        event.preventDefault(); // Prevent the default form submission
        alert('신고가 제출되었습니다.');
        this.submit(); // Submit the form after the alert
    });
</script>
</body>
</html>
